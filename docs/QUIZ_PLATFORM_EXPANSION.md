# 통합 퀴즈·추리·게임 플랫폼 확장 설계

## 개요

바다거북스프(Yes/No 추리) 웹게임을 다양한 퀴즈 타입을 아우르는 플랫폼으로 확장하는 종합 설계 문서입니다.

**현재 상황:**
- 모바일 유저 97%
- 짧은 몰입·공유·재방문이 핵심
- Next.js + Supabase 기반

**목표:**
- 퀴즈 타입 중심 플랫폼 구조
- 다양한 유형 체계적 확장
- UX, 플레이 방식, 멀티/싱글, 수익화 고려

---

## 1️⃣ 퀴즈/게임 타입 대분류 설계

### A. 추리형 (Reasoning)

#### A1. 바다거북스프 (Yes/No 질문)
- **설명**: 현재 구현된 게임. 상황 설명을 듣고 Yes/No 질문으로 진실을 추리
- **특징**: 멀티플레이 중심, 실시간 협동/경쟁

#### A2. 상황 추리 (힌트 단계 공개)
- **설명**: 단계별로 힌트가 공개되며 추리하는 형식
- **특징**: 싱글/멀티 모두 가능, 점진적 난이도 조절

#### A3. 범인/이유 맞히기
- **설명**: 범인을 찾거나 사건의 이유를 추리
- **특징**: 정답이 명확, 설명형 정답

#### A4. 논리 퍼즐 (조건 기반 추론)
- **설명**: 여러 조건을 조합하여 답을 도출
- **특징**: 사고력 중심, 싱글플레이 적합

### B. 넌센스/아이디어형 (Nonsense/Creative)

#### B1. 말장난 넌센스 퀴즈
- **설명**: 언어 유희, 발음, 한자 등을 이용한 넌센스
- **특징**: 공유율 높음, 재미 중심

#### B2. 반전 퀴즈
- **설명**: 예상과 다른 정답, 발상의 전환
- **특징**: 놀라움 요소, SNS 공유 적합

#### B3. 발상의 전환 문제
- **설명**: 고정관념을 깨는 문제
- **특징**: 교육적 가치, 토론 유발

#### B4. "왜?"형 질문 (정답은 설명형)
- **설명**: 현상의 이유를 설명하는 문제
- **특징**: 학습 효과, 설명형 정답

### C. 객관식 퀴즈 (Multiple Choice)

#### C1. 4지선다 일반상식
- **설명**: 전통적인 객관식 퀴즈
- **특징**: 빠른 플레이, 점수 누적 가능

#### C2. OX 퀴즈
- **설명**: 참/거짓 판단
- **특징**: 가장 빠른 플레이, 광고 삽입 적합

#### C3. 시간 제한 퀴즈
- **설명**: 제한 시간 내에 답변
- **특징**: 긴장감, 몰입도 높음

#### C4. 연속 문제 (점수 누적)
- **설명**: 연속으로 맞히면 점수 배율 증가
- **특징**: 재방문 유도, 경쟁 요소

### D. 이미지 기반 퀴즈 (Image-based)

#### D1. 사진 1장 보고 맞히기
- **설명**: 이미지만 보고 정답 추리
- **특징**: 시각적 몰입, 공유 적합

#### D2. 틀린 그림 찾기
- **설명**: 두 이미지 비교하여 차이점 찾기
- **특징**: 집중력 필요, 시간 소요

#### D3. 확대/부분 이미지 퀴즈
- **설명**: 일부만 보고 전체 맞히기
- **특징**: 호기심 유발, 공유율 높음

#### D4. 이미지 + 질문 혼합형
- **설명**: 이미지와 텍스트 질문 조합
- **특징**: 다양한 활용, 학습 효과

### E. 투표/밸런스 게임 (Poll/Balance)

#### E1. A vs B 선택
- **설명**: 두 가지 중 선택
- **특징**: 빠른 참여, 결과 통계 공개

#### E2. 당신의 선택은?
- **설명**: 상황별 선택, 성향 분석
- **특징**: 자기 이해, 친구 비교

#### E3. 결과 통계 공개
- **설명**: 전체 유저 선택 비율 표시
- **특징**: 사회적 증명, 재방문 유도

#### E4. 친구들과 비교
- **설명**: 친구 선택과 비교
- **특징**: 소셜 요소, 공유 유도

### F. 두뇌·문제적남자 스타일 (Brain/Logic)

#### F1. 수열/패턴
- **설명**: 숫자/도형 패턴 찾기
- **특징**: 논리력, 싱글플레이

#### F2. 공간 지각 문제
- **설명**: 3D 회전, 공간 인지
- **특징**: 시각적 사고, 난이도 높음

#### F3. 언어 퍼즐
- **설명**: 단어 조합, 언어 유추
- **특징**: 언어 능력, 교육적

#### F4. 제한 시간 사고력 문제
- **설명**: 시간 내 복잡한 문제 해결
- **특징**: 압박감, 실력 측정

### G. 멀티플레이 전용 (Multiplayer)

#### G1. 라이어 게임
- **설명**: 한 명의 거짓말쟁이 찾기
- **특징**: 심리전, 실시간 대화 필요

#### G2. 마피아
- **설명**: 역할 기반 추리 게임
- **특징**: 장기 플레이, 전략적

#### G3. 퀴즈 배틀 (객관식 대전)
- **설명**: 실시간 객관식 대결
- **특징**: 빠른 플레이, 경쟁 요소

#### G4. 추리 협동 모드
- **설명**: 팀으로 함께 추리
- **특징**: 협동, 소통 중심

---

## 2️⃣ 각 퀴즈 타입별 상세 명세

### A. 추리형

#### A1. 바다거북스프 (Yes/No 질문)
- **플레이 방식**: 멀티플레이 (싱글도 가능)
- **평균 플레이 시간**: 5~15분
- **입력 요소**: 텍스트 질문, Yes/No 버튼
- **정답 구조**: 설명형 (단일 정답)
- **UX 주의점**: 
  - 실수 클릭 방지 (확인 다이얼로그)
  - 질문 히스토리 표시
  - 실시간 채팅 UI 최적화
- **광고/수익화 적합도**: 중간 (게임 중단 시 삽입)

#### A2. 상황 추리 (힌트 단계 공개)
- **플레이 방식**: 싱글/멀티 모두
- **평균 플레이 시간**: 3~5분
- **입력 요소**: 텍스트 답변, 힌트 버튼
- **정답 구조**: 단일 정답 (설명형)
- **UX 주의점**:
  - 힌트 공개 애니메이션
  - 진행률 표시
  - 힌트 사용 제한 표시
- **광고/수익화 적합도**: 높음 (힌트 구매, 문제 간 삽입)

#### A3. 범인/이유 맞히기
- **플레이 방식**: 싱글/멀티 모두
- **평균 플레이 시간**: 2~4분
- **입력 요소**: 텍스트 답변, 선택 버튼
- **정답 구조**: 단일 정답 (설명형)
- **UX 주의점**:
  - 답변 입력 UI 최적화
  - 힌트 표시
- **광고/수익화 적합도**: 중간

#### A4. 논리 퍼즐 (조건 기반 추론)
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 5~10분
- **입력 요소**: 조건 체크박스, 답변 입력
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 조건 시각화
  - 추론 과정 저장
- **광고/수익화 적합도**: 낮음 (몰입 방해)

### B. 넌센스/아이디어형

#### B1. 말장난 넌센스 퀴즈
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 30초~1분
- **입력 요소**: 텍스트 답변, 객관식
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 빠른 플레이 흐름
  - 정답 공개 애니메이션
- **광고/수익화 적합도**: 높음 (문제 간 삽입, 공유 유도)

#### B2. 반전 퀴즈
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~2분
- **입력 요소**: 객관식, 텍스트 답변
- **정답 구조**: 단일 정답 (반전 설명)
- **UX 주의점**:
  - 반전 효과 강조
  - 공유 버튼 강조
- **광고/수익화 적합도**: 높음 (공유율 높음)

#### B3. 발상의 전환 문제
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~3분
- **입력 요소**: 텍스트 답변
- **정답 구조**: 설명형
- **UX 주의점**:
  - 설명 표시 최적화
  - 토론 기능
- **광고/수익화 적합도**: 중간

#### B4. "왜?"형 질문
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~2분
- **입력 요소**: 텍스트 답변
- **정답 구조**: 설명형
- **UX 주의점**:
  - 설명 가독성
  - 학습 효과 강조
- **광고/수익화 적합도**: 중간

### C. 객관식 퀴즈

#### C1. 4지선다 일반상식
- **플레이 방식**: 싱글/멀티 모두
- **평균 플레이 시간**: 30초~1분 (문제당)
- **입력 요소**: 4개 버튼
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 버튼 크기 최적화 (모바일)
  - 실수 클릭 방지
  - 즉시 피드백
- **광고/수익화 적합도**: 높음 (문제 간 삽입, 연속 플레이)

#### C2. OX 퀴즈
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 10~30초 (문제당)
- **입력 요소**: O/X 버튼
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 큰 버튼 (모바일)
  - 빠른 전환
- **광고/수익화 적합도**: 매우 높음 (가장 빠른 플레이, 광고 삽입 용이)

#### C3. 시간 제한 퀴즈
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~3분
- **입력 요소**: 객관식, 타이머
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 타이머 시각화
  - 긴장감 유지
  - 시간 종료 처리
- **광고/수익화 적합도**: 높음 (라운드 간 삽입)

#### C4. 연속 문제 (점수 누적)
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 5~10분
- **입력 요소**: 객관식
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 점수 배율 표시
  - 연속 기록 강조
  - 실패 시 리셋 애니메이션
- **광고/수익화 적합도**: 높음 (재방문 유도, 광고로 계속하기)

### D. 이미지 기반 퀴즈

#### D1. 사진 1장 보고 맞히기
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 30초~1분
- **입력 요소**: 이미지, 텍스트 답변/객관식
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 이미지 로딩 최적화
  - 확대 기능
  - 모바일 화면 최적화
- **광고/수익화 적합도**: 높음 (공유 적합, 문제 간 삽입)

#### D2. 틀린 그림 찾기
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 2~5분
- **입력 요소**: 이미지, 터치 영역
- **정답 구조**: 복수 정답 (차이점 위치)
- **UX 주의점**:
  - 터치 정확도
  - 찾은 부분 표시
  - 힌트 기능
- **광고/수익화 적합도**: 중간 (몰입 방해 주의)

#### D3. 확대/부분 이미지 퀴즈
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 30초~1분
- **입력 요소**: 이미지, 텍스트 답변
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 확대/축소 제스처
  - 전체 이미지 공개 타이밍
- **광고/수익화 적합도**: 높음 (호기심 유발, 공유 적합)

#### D4. 이미지 + 질문 혼합형
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~2분
- **입력 요소**: 이미지, 텍스트 질문, 객관식
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 이미지/텍스트 균형
  - 레이아웃 최적화
- **광고/수익화 적합도**: 중간

### E. 투표/밸런스 게임

#### E1. A vs B 선택
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 10~30초
- **입력 요소**: 2개 버튼
- **정답 구조**: 투표형 (통계 공개)
- **UX 주의점**:
  - 큰 버튼
  - 빠른 선택
  - 결과 즉시 표시
- **광고/수익화 적합도**: 매우 높음 (가장 빠른 플레이, 공유 적합)

#### E2. 당신의 선택은?
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 1~2분
- **입력 요소**: 다중 선택, 상황별 버튼
- **정답 구조**: 성향 분석 결과
- **UX 주의점**:
  - 결과 시각화
  - 친구 비교 기능
- **광고/수익화 적합도**: 높음 (공유 유도)

#### E3. 결과 통계 공개
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 30초~1분
- **입력 요소**: 선택 버튼
- **정답 구조**: 통계 데이터
- **UX 주의점**:
  - 통계 시각화
  - 재방문 유도
- **광고/수익화 적합도**: 높음

#### E4. 친구들과 비교
- **플레이 방식**: 싱글플레이 (소셜)
- **평균 플레이 시간**: 1~2분
- **입력 요소**: 선택 버튼
- **정답 구조**: 비교 결과
- **UX 주의점**:
  - 친구 목록 연동
  - 비교 UI 최적화
- **광고/수익화 적합도**: 중간

### F. 두뇌·문제적남자 스타일

#### F1. 수열/패턴
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 2~5분
- **입력 요소**: 숫자 입력, 패턴 선택
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 패턴 시각화
  - 힌트 기능
- **광고/수익화 적합도**: 낮음 (몰입 방해)

#### F2. 공간 지각 문제
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 3~5분
- **입력 요소**: 3D 회전, 선택
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 3D 렌더링 성능
  - 회전 제스처
- **광고/수익화 적합도**: 낮음

#### F3. 언어 퍼즐
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 2~4분
- **입력 요소**: 텍스트 입력, 단어 조합
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 키보드 최적화
  - 힌트 표시
- **광고/수익화 적합도**: 낮음

#### F4. 제한 시간 사고력 문제
- **플레이 방식**: 싱글플레이
- **평균 플레이 시간**: 3~5분
- **입력 요소**: 복합 입력
- **정답 구조**: 단일 정답
- **UX 주의점**:
  - 타이머 표시
  - 진행 상황
- **광고/수익화 적합도**: 낮음

### G. 멀티플레이 전용

#### G1. 라이어 게임
- **플레이 방식**: 멀티플레이 (4~8인)
- **평균 플레이 시간**: 10~20분
- **입력 요소**: 텍스트 채팅, 투표 버튼
- **정답 구조**: 투표 결과
- **UX 주의점**:
  - 실시간 채팅
  - 투표 UI
  - 역할 표시
- **광고/수익화 적합도**: 낮음 (장기 플레이)

#### G2. 마피아
- **플레이 방식**: 멀티플레이 (6~12인)
- **평균 플레이 시간**: 20~40분
- **입력 요소**: 텍스트 채팅, 투표, 역할 액션
- **정답 구조**: 게임 결과
- **UX 주의점**:
  - 단계별 UI
  - 역할 관리
  - 타이머
- **광고/수익화 적합도**: 낮음

#### G3. 퀴즈 배틀 (객관식 대전)
- **플레이 방식**: 멀티플레이 (1vs1)
- **평균 플레이 시간**: 3~5분
- **입력 요소**: 객관식 버튼
- **정답 구조**: 점수 비교
- **UX 주의점**:
  - 실시간 점수
  - 상대 진행 상황
- **광고/수익화 적합도**: 중간

#### G4. 추리 협동 모드
- **플레이 방식**: 멀티플레이 (2~4인)
- **평균 플레이 시간**: 10~15분
- **입력 요소**: 텍스트 채팅, 공유 힌트
- **정답 구조**: 협동 정답
- **UX 주의점**:
  - 협동 UI
  - 힌트 공유
- **광고/수익화 적합도**: 낮음

---

## 3️⃣ 플랫폼 구조 설계

### 홈 화면 구조

```
┌─────────────────────────────────┐
│  헤더 (검색, 알림, 프로필)        │
├─────────────────────────────────┤
│  퀴즈 타입 카드 그리드            │
│  ┌─────┐ ┌─────┐ ┌─────┐        │
│  │추리 │ │넌센│ │객관│        │
│  └─────┘ └─────┘ └─────┘        │
│  ┌─────┐ ┌─────┐ ┌─────┐        │
│  │이미지│ │투표│ │두뇌│        │
│  └─────┘ └─────┘ └─────┘        │
├─────────────────────────────────┤
│  인기/트렌딩/신규 탭              │
│  ┌─────────────────────────┐   │
│  │ [인기] [트렌딩] [신규]    │   │
│  └─────────────────────────┘   │
│  퀴즈 리스트 (카드형)            │
├─────────────────────────────────┤
│  친구들이 푼 문제                │
│  ┌─────────────────────────┐   │
│  │ 친구A가 "넌센스 퀴즈" 풀었어요│ │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

### 퀴즈 타입 선택 화면

- **카드형 레이아웃**: 각 타입별 아이콘 + 이름 + 설명
- **필터**: 싱글/멀티, 난이도, 인기순
- **검색**: 타입별 검색

### 피드 구조

- **타입별 필터**: 상단 탭으로 타입 선택
- **정렬**: 인기순, 최신순, 난이도순
- **무한 스크롤**: 모바일 최적화

---

## 4️⃣ DB 설계 방향 (Supabase)

### 테이블 구조

#### quizzes (공통 테이블)
```sql
CREATE TABLE quizzes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  type TEXT NOT NULL CHECK (type IN (
    'soup',           -- 바다거북스프
    'reasoning',      -- 상황 추리
    'nonsense',       -- 넌센스
    'mcq',            -- 객관식
    'ox',             -- OX
    'image',          -- 이미지
    'poll',           -- 투표
    'balance',        -- 밸런스 게임
    'logic',          -- 논리 퍼즐
    'pattern',        -- 수열/패턴
    'liar',           -- 라이어 게임
    'mafia',          -- 마피아
    'battle'          -- 퀴즈 배틀
  )),
  title TEXT NOT NULL,
  description TEXT,
  user_id UUID REFERENCES users(id) ON DELETE SET NULL, -- 퀴즈 생성자 (기존 problems 테이블의 user_id)
  status TEXT NOT NULL DEFAULT 'draft' CHECK (status IN ('draft', 'published', 'featured', 'archived')),
  difficulty INTEGER DEFAULT 1 CHECK (difficulty BETWEEN 1 AND 5),
  play_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,
  bookmark_count INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  published_at TIMESTAMPTZ,
  
  -- 메타데이터
  tags TEXT[],
  estimated_time INTEGER, -- 예상 플레이 시간 (초)
  is_multiplayer BOOLEAN DEFAULT false,
  min_players INTEGER DEFAULT 1,
  max_players INTEGER DEFAULT 1
);
```

#### quiz_contents (타입별 세부 데이터)
```sql
CREATE TABLE quiz_contents (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quiz_id UUID REFERENCES quizzes(id) ON DELETE CASCADE,
  
  -- 타입별 공통 필드
  content JSONB NOT NULL, -- 타입별 구조화된 데이터
  
  -- 바다거북스프 (soup)
  -- {
  --   "story": "...",
  --   "answer": "...",
  --   "hints": [...]
  -- }
  
  -- 객관식 (mcq, ox)
  -- {
  --   "question": "...",
  --   "options": ["A", "B", "C", "D"],
  --   "correct": 0,
  --   "explanation": "..."
  -- }
  
  -- 이미지 (image)
  -- {
  --   "image_url": "...",
  --   "question": "...",
  --   "answer": "..."
  -- }
  
  -- 투표 (poll)
  -- {
  --   "question": "...",
  --   "options": ["A", "B"],
  --   "show_stats": true
  -- }
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### quiz_votes (좋아요/싫어요)
```sql
CREATE TABLE quiz_votes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quiz_id UUID REFERENCES quizzes(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  vote_type TEXT NOT NULL CHECK (vote_type IN ('like', 'dislike')),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(quiz_id, user_id)
);
```

#### quiz_bookmarks
```sql
CREATE TABLE quiz_bookmarks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quiz_id UUID REFERENCES quizzes(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(quiz_id, user_id)
);
```

#### quiz_plays (플레이 기록)
```sql
CREATE TABLE quiz_plays (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quiz_id UUID REFERENCES quizzes(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  room_id UUID REFERENCES quiz_rooms(id) ON DELETE SET NULL, -- 멀티플레이 시
  result TEXT, -- 'correct', 'incorrect', 'abandoned'
  score INTEGER,
  time_spent INTEGER, -- 초 단위
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### quiz_rooms (멀티플레이 방)
```sql
CREATE TABLE quiz_rooms (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  quiz_id UUID REFERENCES quizzes(id) ON DELETE CASCADE,
  host_id UUID REFERENCES users(id) ON DELETE SET NULL,
  code TEXT UNIQUE NOT NULL, -- 방 코드
  status TEXT NOT NULL DEFAULT 'waiting' CHECK (status IN ('waiting', 'playing', 'finished', 'cancelled')),
  max_players INTEGER DEFAULT 4,
  current_players INTEGER DEFAULT 0,
  settings JSONB DEFAULT '{}', -- 게임 설정
  created_at TIMESTAMPTZ DEFAULT NOW(),
  started_at TIMESTAMPTZ,
  finished_at TIMESTAMPTZ,
  last_activity_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### quiz_room_participants
```sql
CREATE TABLE quiz_room_participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  room_id UUID REFERENCES quiz_rooms(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  role TEXT, -- 'host', 'player', 'spectator'
  status TEXT DEFAULT 'joined' CHECK (status IN ('joined', 'ready', 'playing', 'finished', 'left')),
  score INTEGER DEFAULT 0,
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  left_at TIMESTAMPTZ,
  UNIQUE(room_id, user_id)
);
```

#### quiz_follow_creators (크리에이터 팔로우)
```sql
CREATE TABLE quiz_follow_creators (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  follower_id UUID REFERENCES users(id) ON DELETE CASCADE,
  creator_id UUID REFERENCES users(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(follower_id, creator_id)
);
```

### RLS 정책 방향

#### quizzes
- **SELECT**: 모든 published/featured 퀴즈는 공개
- **INSERT**: 인증된 사용자만 생성 가능
- **UPDATE**: 본인이 생성한 퀴즈만 수정 가능
- **DELETE**: 본인이 생성한 퀴즈만 삭제 가능

#### quiz_contents
- **SELECT**: 해당 퀴즈가 공개되어 있으면 조회 가능
- **INSERT/UPDATE/DELETE**: 퀴즈 소유자만 가능

#### quiz_votes, quiz_bookmarks
- **SELECT**: 본인 것만 조회
- **INSERT/UPDATE/DELETE**: 본인만 가능

#### quiz_plays
- **SELECT**: 본인 플레이 기록만 조회
- **INSERT**: 인증된 사용자만 가능

#### quiz_rooms
- **SELECT**: 참여자 또는 공개 방만 조회
- **INSERT**: 인증된 사용자만 생성 가능
- **UPDATE**: 호스트만 가능
- **DELETE**: 호스트만 가능

---

## 5️⃣ MVP 우선순위 제안

### 1단계 MVP (2주)

#### 구현 항목
1. **바다거북스프** (기존 유지)
   - 현재 구현된 기능 그대로 유지
   - 타입을 'soup'으로 분류

2. **넌센스 퀴즈**
   - 싱글플레이
   - 텍스트 질문 + 텍스트 답변
   - 정답 공개 + 설명
   - 공유 기능

3. **객관식 퀴즈**
   - 4지선다
   - OX 퀴즈
   - 즉시 피드백
   - 점수 표시

4. **북마크 / 좋아요**
   - 퀴즈 북마크
   - 좋아요 기능
   - 내 북마크 목록

#### 이유
- **넌센스 퀴즈**: 공유율 높음, 빠른 개발, 재미 요소
- **객관식 퀴즈**: 가장 빠른 플레이, 광고 삽입 용이, 점수 경쟁
- **북마크/좋아요**: 재방문 유도, 사용자 참여도 증가

#### 기대 효과
- 플레이 타입 다양화로 체류시간 증가
- 공유를 통한 신규 유저 유입
- 광고 삽입 기회 증가

### 2단계 (4주)

#### 구현 항목
1. **이미지 퀴즈**
   - 사진 1장 보고 맞히기
   - 이미지 업로드/관리
   - 이미지 최적화

2. **투표/밸런스 게임**
   - A vs B 선택
   - 결과 통계 공개
   - 친구 비교 (선택)

#### 이유
- **이미지 퀴즈**: 시각적 몰입, 공유 적합, 차별화
- **투표/밸런스**: 가장 빠른 플레이, 소셜 요소, 재방문

#### 기대 효과
- 콘텐츠 다양성 확보
- 공유율 증가
- 사용자 참여도 증가

### 3단계 (6주)

#### 구현 항목
1. **멀티플레이 확장**
   - 라이어 게임
   - 퀴즈 배틀
   - 실시간 대전 시스템

#### 이유
- **라이어 게임**: 장기 체류, 소셜 요소, 차별화
- **퀴즈 배틀**: 빠른 경쟁, 재미 요소

#### 기대 효과
- 장기 체류시간 증가
- 친구 초대 유도
- 플랫폼 차별화

---

## 6️⃣ UX/성장 관점 분석

### 공유에 강한 타입

1. **넌센스 퀴즈** ⭐⭐⭐⭐⭐
   - 재미 요소
   - 짧은 플레이 시간
   - 정답 공개 시 놀라움
   - SNS 공유 적합

2. **반전 퀴즈** ⭐⭐⭐⭐⭐
   - 예상 밖 정답
   - 토론 유발
   - 공유 동기 강함

3. **이미지 퀴즈** ⭐⭐⭐⭐
   - 시각적 임팩트
   - 공유 시 이미지 포함
   - 호기심 유발

4. **투표/밸런스** ⭐⭐⭐⭐
   - 빠른 참여
   - 결과 공유
   - 친구 비교

### 체류시간을 늘리는 타입

1. **연속 문제 (점수 누적)** ⭐⭐⭐⭐⭐
   - 재방문 유도
   - 점수 경쟁
   - 연속 기록 도전

2. **시간 제한 퀴즈** ⭐⭐⭐⭐
   - 긴장감
   - 몰입도 높음
   - 반복 플레이

3. **멀티플레이 게임** ⭐⭐⭐⭐
   - 장기 체류
   - 소셜 요소
   - 재방문 유도

### 광고 UX와 궁합이 좋은 타입

1. **OX 퀴즈** ⭐⭐⭐⭐⭐
   - 가장 빠른 플레이
   - 문제 간 광고 삽입 용이
   - 몰입 방해 최소

2. **객관식 퀴즈** ⭐⭐⭐⭐⭐
   - 빠른 플레이
   - 문제 간 삽입
   - 연속 플레이

3. **넌센스 퀴즈** ⭐⭐⭐⭐
   - 짧은 플레이
   - 정답 공개 후 삽입
   - 공유 유도

4. **투표/밸런스** ⭐⭐⭐⭐
   - 매우 빠른 플레이
   - 결과 화면에 삽입
   - 재방문 유도

---

## 7️⃣ 최종 출력

### 전체 퀴즈 타입 맵

| 타입 | 플레이 방식 | 평균 시간 | 입력 요소 | 정답 구조 | 광고 적합도 | 공유 적합도 | 체류시간 | 우선순위 |
|------|------------|----------|----------|----------|------------|------------|----------|---------|
| **A1. 바다거북스프** | 멀티 | 5~15분 | Yes/No | 설명형 | 중간 | 중간 | 높음 | ✅ MVP |
| **A2. 상황 추리** | 싱글/멀티 | 3~5분 | 텍스트 | 설명형 | 높음 | 중간 | 중간 | 2단계 |
| **A3. 범인/이유** | 싱글/멀티 | 2~4분 | 텍스트 | 설명형 | 중간 | 중간 | 중간 | 2단계 |
| **A4. 논리 퍼즐** | 싱글 | 5~10분 | 조건 | 단일 | 낮음 | 낮음 | 높음 | 3단계 |
| **B1. 넌센스** | 싱글 | 30초~1분 | 텍스트/객관식 | 단일 | 높음 | ⭐⭐⭐⭐⭐ | 중간 | ✅ MVP |
| **B2. 반전 퀴즈** | 싱글 | 1~2분 | 객관식 | 설명형 | 높음 | ⭐⭐⭐⭐⭐ | 중간 | ✅ MVP |
| **B3. 발상 전환** | 싱글 | 1~3분 | 텍스트 | 설명형 | 중간 | 높음 | 중간 | 2단계 |
| **B4. "왜?"형** | 싱글 | 1~2분 | 텍스트 | 설명형 | 중간 | 중간 | 중간 | 2단계 |
| **C1. 4지선다** | 싱글/멀티 | 30초~1분 | 4버튼 | 단일 | ⭐⭐⭐⭐⭐ | 중간 | 중간 | ✅ MVP |
| **C2. OX 퀴즈** | 싱글 | 10~30초 | O/X | 단일 | ⭐⭐⭐⭐⭐ | 중간 | 낮음 | ✅ MVP |
| **C3. 시간 제한** | 싱글 | 1~3분 | 객관식 | 단일 | 높음 | 중간 | 높음 | 2단계 |
| **C4. 연속 문제** | 싱글 | 5~10분 | 객관식 | 단일 | 높음 | 중간 | ⭐⭐⭐⭐⭐ | 2단계 |
| **D1. 사진 맞히기** | 싱글 | 30초~1분 | 이미지+텍스트 | 단일 | 높음 | ⭐⭐⭐⭐ | 중간 | 2단계 |
| **D2. 틀린 그림 찾기** | 싱글 | 2~5분 | 이미지+터치 | 복수 | 중간 | 중간 | 높음 | 3단계 |
| **D3. 확대/부분** | 싱글 | 30초~1분 | 이미지 | 단일 | 높음 | ⭐⭐⭐⭐ | 중간 | 2단계 |
| **D4. 이미지+질문** | 싱글 | 1~2분 | 이미지+객관식 | 단일 | 중간 | 중간 | 중간 | 2단계 |
| **E1. A vs B** | 싱글 | 10~30초 | 2버튼 | 투표형 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 낮음 | 2단계 |
| **E2. 당신의 선택** | 싱글 | 1~2분 | 다중선택 | 성향분석 | 높음 | 높음 | 중간 | 2단계 |
| **E3. 결과 통계** | 싱글 | 30초~1분 | 선택 | 통계 | 높음 | 중간 | 중간 | 2단계 |
| **E4. 친구 비교** | 싱글(소셜) | 1~2분 | 선택 | 비교 | 중간 | 높음 | 중간 | 3단계 |
| **F1. 수열/패턴** | 싱글 | 2~5분 | 숫자입력 | 단일 | 낮음 | 낮음 | 높음 | 3단계 |
| **F2. 공간 지각** | 싱글 | 3~5분 | 3D회전 | 단일 | 낮음 | 낮음 | 높음 | 3단계 |
| **F3. 언어 퍼즐** | 싱글 | 2~4분 | 텍스트 | 단일 | 낮음 | 낮음 | 높음 | 3단계 |
| **F4. 시간 사고력** | 싱글 | 3~5분 | 복합 | 단일 | 낮음 | 낮음 | 높음 | 3단계 |
| **G1. 라이어 게임** | 멀티 | 10~20분 | 채팅+투표 | 결과 | 낮음 | 높음 | ⭐⭐⭐⭐⭐ | 3단계 |
| **G2. 마피아** | 멀티 | 20~40분 | 채팅+투표 | 결과 | 낮음 | 높음 | ⭐⭐⭐⭐⭐ | 3단계 |
| **G3. 퀴즈 배틀** | 멀티 | 3~5분 | 객관식 | 점수 | 중간 | 중간 | 중간 | 3단계 |
| **G4. 추리 협동** | 멀티 | 10~15분 | 채팅 | 협동 | 낮음 | 중간 | 높음 | 3단계 |

### MVP 기능 체크리스트

#### 1단계 MVP (2주)

**공통 기능**
- [ ] 퀴즈 타입 선택 화면
- [ ] 타입별 필터링
- [ ] 홈 화면 리디자인 (타입 중심)
- [ ] 북마크 기능
- [ ] 좋아요 기능
- [ ] 내 북마크 목록

**넌센스 퀴즈**
- [ ] 퀴즈 생성 (타입: nonsense)
- [ ] 퀴즈 플레이 화면
- [ ] 정답 공개 애니메이션
- [ ] 공유 기능

**객관식 퀴즈**
- [ ] 4지선다 퀴즈 생성
- [ ] OX 퀴즈 생성
- [ ] 객관식 플레이 화면
- [ ] 즉시 피드백
- [ ] 점수 표시
- [ ] 연속 문제 모드 (기본)

**DB/백엔드**
- [ ] quizzes 테이블 확장 (type 추가)
- [ ] quiz_contents 테이블 생성
- [ ] quiz_votes 테이블 생성
- [ ] quiz_bookmarks 테이블 생성
- [ ] quiz_plays 테이블 생성
- [ ] RLS 정책 적용

**UI/UX**
- [ ] 타입별 카드 디자인
- [ ] 모바일 최적화
- [ ] 광고 삽입 위치 최적화

### 개발 티켓 (20개)

#### 공통 인프라 (5개)

1. **퀴즈 타입 enum 및 타입 시스템 구축**
   - 설명: TypeScript 타입 정의, DB enum 추가
   - 완료 조건: 모든 타입이 타입 시스템에 정의됨

2. **홈 화면 리디자인 (타입 중심)**
   - 설명: 퀴즈 타입 카드 그리드, 필터링
   - 완료 조건: 타입별로 퀴즈 선택 가능

3. **퀴즈 공통 컴포넌트 추상화**
   - 설명: 타입별로 다른 UI이지만 공통 구조
   - 완료 조건: 재사용 가능한 컴포넌트 구조

4. **북마크 기능 구현**
   - 설명: 퀴즈 북마크, 북마크 목록
   - 완료 조건: 북마크 추가/삭제/조회 가능

5. **좋아요 기능 구현**
   - 설명: 퀴즈 좋아요, 좋아요 수 표시
   - 완료 조건: 좋아요 추가/삭제, 실시간 카운트

#### 넌센스 퀴즈 (3개)

6. **넌센스 퀴즈 생성 UI**
   - 설명: 제목, 질문, 정답, 설명 입력
   - 완료 조건: 퀴즈 생성 및 저장 가능

7. **넌센스 퀴즈 플레이 화면**
   - 설명: 질문 표시, 답변 입력, 정답 공개
   - 완료 조건: 플레이 가능, 정답 공개 애니메이션

8. **넌센스 퀴즈 공유 기능**
   - 설명: 결과 공유, SNS 링크 생성
   - 완료 조건: 공유 버튼 클릭 시 링크 생성

#### 객관식 퀴즈 (4개)

9. **객관식 퀴즈 생성 UI (4지선다)**
   - 설명: 질문, 4개 선택지, 정답, 설명
   - 완료 조건: 4지선다 퀴즈 생성 가능

10. **OX 퀴즈 생성 UI**
    - 설명: 질문, O/X 선택, 정답, 설명
    - 완료 조건: OX 퀴즈 생성 가능

11. **객관식 퀴즈 플레이 화면**
    - 설명: 질문 표시, 선택지 버튼, 즉시 피드백
    - 완료 조건: 선택 시 즉시 정답 표시, 점수 계산

12. **연속 문제 모드 (기본)**
    - 설명: 여러 문제 연속 플레이, 점수 누적
    - 완료 조건: 연속 플레이 가능, 점수 표시

#### DB/백엔드 (4개)

13. **quizzes 테이블 확장**
    - 설명: type 컬럼 추가, 기존 데이터 마이그레이션
    - 완료 조건: 모든 퀴즈에 type 할당됨

14. **quiz_contents 테이블 생성**
    - 설명: 타입별 구조화된 데이터 저장
    - 완료 조건: JSONB로 타입별 데이터 저장 가능

15. **quiz_votes, quiz_bookmarks 테이블 생성**
    - 설명: 좋아요, 북마크 기능을 위한 테이블
    - 완료 조건: 좋아요/북마크 CRUD 가능

16. **RLS 정책 적용**
    - 설명: 모든 테이블에 RLS 정책 적용
    - 완료 조건: 권한 없는 접근 차단 확인

#### UI/UX 최적화 (4개)

17. **모바일 최적화 (버튼 크기, 레이아웃)**
    - 설명: 터치 영역 최적화, 반응형 레이아웃
    - 완료 조건: 모바일에서 사용성 테스트 통과

18. **광고 삽입 위치 최적화**
    - 설명: 문제 간, 결과 화면에 광고 삽입
    - 완료 조건: 광고가 플레이를 방해하지 않음

19. **로딩 상태 및 에러 처리**
    - 설명: 로딩 스피너, 에러 메시지
    - 완료 조건: 모든 비동기 작업에 로딩/에러 처리

20. **성능 최적화 (이미지, 번들 크기)**
    - 설명: 이미지 최적화, 코드 스플리팅
    - 완료 조건: 로딩 시간 3초 이내

---

## 추가 고려사항

### 수익화 전략

1. **광고 삽입**
   - 문제 간 삽입 (OX, 객관식)
   - 결과 화면 삽입
   - 연속 문제 중단 시 광고로 계속하기

2. **프리미엄 기능**
   - 힌트 구매
   - 광고 제거
   - 특별 퀴즈 접근

3. **크리에이터 수익 분배**
   - 인기 퀴즈 크리에이터 보상
   - 광고 수익 분배

### 성장 전략

1. **바이럴 요소**
   - 공유 시 보상
   - 친구 초대 보상
   - 결과 공유 유도

2. **커뮤니티**
   - 크리에이터 팔로우
   - 댓글 기능
   - 퀴즈 제작 가이드

3. **경쟁 요소**
   - 리더보드
   - 일일 챌린지
   - 배지 시스템

---

## 결론

이 설계를 통해 바다거북스프를 다양한 퀴즈 타입을 아우르는 플랫폼으로 확장할 수 있습니다. MVP부터 시작하여 단계적으로 기능을 추가하면서 사용자 피드백을 반영하여 발전시켜 나가면 됩니다.

